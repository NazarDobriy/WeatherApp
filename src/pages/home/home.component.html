<section class="px-32 lg:px-44 py-9">
  <app-location-search class="flex justify-center items-center"></app-location-search>

  @if (homeFacadeService.isLoading$ | async) {
    <section class="flex justify-center items-center mt-24">
      <mat-spinner></mat-spinner>
    </section>
  } @else if (location() && weather()) {
    <section
      class="flex flex-col md:flex-row gap-10 md:gap-0 justify-between items-center mt-12"
    >
      <section class="flex items-center">
        <app-location-square></app-location-square>

        <div class="flex flex-col items-center gap-4 ml-8">
          <div>{{ location()?.LocalizedName }}</div>

          {{ temperature() | temperatureConverter : isCelsius() }}
        </div>
      </section>

      <section class="flex items-center gap-3">
        <mat-icon
          class="cursor-pointer"
          (click)="isFavorite() ? removeFromFavorites() : addToFavorites()"
        >
          {{ isFavorite() ? 'favorite' : 'favorite_border' }}
        </mat-icon>
        <button
          class="w-52"
          mat-flat-button
          color="{{ isFavorite() ? 'warn' : 'primary' }}"
          (click)="isFavorite() ? removeFromFavorites() : addToFavorites()"
        >
          {{ isFavorite() ? 'Remove from favorite' : 'Add to favorite' }}
        </button>
      </section>
    </section>

    <section class="flex justify-center md:justify-start mt-12">
      <mat-slide-toggle
        [checked]="isLineChart()"
        (toggleChange)="toggleLineChart()"
      >
        <span class="md:block hidden">
          Click to change daily forecast representation!
        </span>
      </mat-slide-toggle>
    </section>

    <section class="flex justify-center mt-32">
      @if (isLineChart()) {
        <app-line-chart
          labelX="Day"
          labelY="Night"
          [datasetX]="dayDataset()"
          [datasetY]="nightDataset()"
        ></app-line-chart>
      } @else {
        <app-forecasts [forecasts]="forecasts()"></app-forecasts>
      }
    </section>
  } @else {
    <section class="flex justify-center">
      No available weather.
    </section>
  }
</section>
