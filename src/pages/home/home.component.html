<section class="px-32 lg:px-44 py-9">
  <app-location-search class="flex justify-center items-center"></app-location-search>

  @if (homeFacadeService.isLoading$ | async) {
    <section class="flex justify-center items-center mt-24">
      <mat-spinner></mat-spinner>
    </section>
  } @else if (location() && weather()) {
    <section class="flex flex-col md:flex-row gap-10 md:gap-0 justify-between items-center mt-12">
      <section class="flex items-center">
        <img
          ngSrc="assets/weather/{{ weather()?.WeatherIcon }}.svg"
          height="64"
          width="64"
          priority
          alt="{{ weather()?.WeatherText ?? 'Weather icon' }}"
        />

        <div class="flex flex-col items-center gap-4 ml-8">
          <div>{{ location()?.LocalizedName }}</div>

          {{ temperature() | temperatureConverter : isCelsius() }}
        </div>
      </section>

      <section class="flex items-center gap-3">
        <mat-icon
          class="cursor-pointer"
          (click)="isFavorite() ? removeFromFavorites() : addToFavorites()"
        >
          {{ isFavorite() ? 'favorite' : 'favorite_border' }}
        </mat-icon>

        <app-button
          [width]="buttonWidth.MEDIUM"
          [type]="isFavorite() ? buttonType.WARNING : buttonType.PRIMARY"
          (click)="isFavorite() ? removeFromFavorites() : addToFavorites()"
        >
          {{ isFavorite() ? 'Remove from favorite' : 'Add to favorite' }}
        </app-button>
      </section>
    </section>

    <section class="flex justify-center md:justify-start mt-12">
      <mat-slide-toggle
        color="primary"
        [checked]="isLineChart()"
        (toggleChange)="toggleLineChart()"
      >
        <span class="md:block hidden text-neutral">
          Click to change daily forecast representation!
        </span>
      </mat-slide-toggle>
    </section>

    <section class="flex justify-center mt-32">
      @if (isLineChart()) {
        <app-line-chart
          labelX="Day"
          labelY="Night"
          [datasetX]="dayDataset()"
          [datasetY]="nightDataset()"
        ></app-line-chart>
      } @else {
        <app-forecasts [forecasts]="forecasts()"></app-forecasts>
      }
    </section>
  } @else {
    <section class="flex justify-center">
      No available weather.
    </section>
  }
</section>
