@if (locationSearchFormService.formGroup) {
  <form [formGroup]="locationSearchFormService.formGroup">
    <mat-form-field
      class="2xl:w-[700px] xl:w-[600px] md:w-[500px] sm:w-[400px] w-72"
      appearance="fill"
    >
      <mat-label>Location</mat-label>

      <input
        matInput
        formControlName="searchInput"
        type="text"
        [matAutocomplete]="auto"
        [errorStateMatcher]="matcher"
      />

      @if (searchInput()) {
        <button
          matSuffix
          mat-icon-button
          aria-label="Clear"
          (click)="clearSearchInput()"
        >
          <mat-icon>close</mat-icon>
        </button>
      }

      @if (requiredError()) {
        <mat-error>Please enter a location.</mat-error>
      }

      @if (patternError()) {
        <mat-error>Please enter only English characters.</mat-error>
      }

      <mat-autocomplete
        #auto="matAutocomplete"
        (optionSelected)="onOptionSelected($event)"
      >
        @if (isLoading$ | async) {
          <mat-option disabled>
            <div class="flex justify-center items-center w-full h-full">
              <mat-spinner diameter="32"></mat-spinner>
            </div>
          </mat-option>
        } @else {
          @for (location of locations$ | async; track location.Key) {
            <mat-option
              [id]="location.Key"
              [value]="location.LocalizedName"
              (click)="onSelectionChange(location)"
            >
              <section class="flex justify-between gap-3">
                <div>{{ location.LocalizedName }}</div>
                <div>
                  ({{ location.Country?.LocalizedName }}, {{ location.AdministrativeArea?.LocalizedName }})
                </div>
              </section>
            </mat-option>
          }
        }
      </mat-autocomplete>
    </mat-form-field>
  </form>
}
